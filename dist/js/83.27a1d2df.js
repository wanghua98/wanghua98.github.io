"use strict";(self["webpackChunkvue_demo2"]=self["webpackChunkvue_demo2"]||[]).push([[83],{3083:function(e,a,t){t.r(a),t.d(a,{default:function(){return k}});var n=t(6768),o=t(5130),l=t(4232),r=t(144),s=t(9871);const c={class:"service-publishing"},u=["onClick"],i="/services",d="/services/all";var h={__name:"AservePublishing",setup(e){const a=(0,r.KR)({chaperonId:null,serviceDate:""}),t=(0,r.KR)([]),h=s.A.API_BASE_URL,p=async e=>{if(!e.ok){const a=await e.json();throw new Error(a.msg||"请求失败")}return e.json()},v=async()=>{try{const e=await fetch(`${h}${i}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a.value)}),t=await p(e);1===t.code?(alert("发布陪诊服务成功！"),a.value={chaperonId:null,serviceDate:""},k()):alert(`发布失败: ${t.msg}`)}catch(e){console.error("发布陪诊服务出错:",e),alert(`发布陪诊服务失败: ${e.message}`)}},k=async()=>{try{const e=await fetch(`${h}${d}`,{method:"GET"}),a=await p(e);1===a.code?t.value=a.data.rows:(alert(`获取已发布陪诊列表失败: ${a.msg}`),t.value=[])}catch(e){console.error("获取已发布陪诊列表出错:",e),alert(`获取已发布陪诊列表失败: ${e.message}`),t.value=[]}},m=async e=>{if(confirm(`确定要下架ID为 ${e} 的陪诊服务吗？`))try{const a=await fetch(`${h}${i}?id=${e}`,{method:"DELETE"}),t=await p(a);1===t.code?(alert("下架陪诊服务成功！"),k()):alert(`下架失败: ${t.msg}`)}catch(a){console.error("下架陪诊服务出错:",a),alert(`下架陪诊服务失败: ${a.message}`)}};return(0,n.sV)((()=>{k()})),(e,r)=>((0,n.uX)(),(0,n.CE)("section",c,[r[5]||(r[5]=(0,n.Lk)("h2",null,"陪诊服务发布与管理",-1)),r[6]||(r[6]=(0,n.Lk)("h3",null,"发布陪诊服务",-1)),(0,n.Lk)("form",{onSubmit:(0,o.D$)(v,["prevent"])},[r[2]||(r[2]=(0,n.Lk)("label",{for:"publish-chaperone-id"},"陪诊人员ID:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"number",id:"publish-chaperone-id","onUpdate:modelValue":r[0]||(r[0]=e=>a.value.chaperonId=e),required:""},null,512),[[o.Jo,a.value.chaperonId]]),r[3]||(r[3]=(0,n.Lk)("label",{for:"publish-date"},"服务日期:",-1)),(0,n.bo)((0,n.Lk)("input",{type:"date",id:"publish-date","onUpdate:modelValue":r[1]||(r[1]=e=>a.value.serviceDate=e),required:""},null,512),[[o.Jo,a.value.serviceDate]]),r[4]||(r[4]=(0,n.Lk)("button",{type:"submit"},"发布服务",-1))],32),r[7]||(r[7]=(0,n.Lk)("h3",null,"已发布陪诊服务列表",-1)),(0,n.Lk)("button",{onClick:k},"刷新已发布列表"),(0,n.Lk)("ul",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(t.value,(e=>((0,n.uX)(),(0,n.CE)("li",{key:e.id},[(0,n.eW)(" ID: "+(0,l.v_)(e.id)+", 陪诊人员姓名: "+(0,l.v_)(e.name)+", 手机: "+(0,l.v_)(e.phone)+", 服务日期: "+(0,l.v_)(e.date)+" ",1),(0,n.Lk)("button",{onClick:a=>m(e.id)},"下架",8,u)])))),128))])]))}},p=t(1241);const v=(0,p.A)(h,[["__scopeId","data-v-dc3add2a"]]);var k=v},9871:function(e,a){const t={API_BASE_URL:"http://14.103.237.241:8080"};a.A=t}}]);
//# sourceMappingURL=83.27a1d2df.js.map