"use strict";(self["webpackChunkvue_demo2"]=self["webpackChunkvue_demo2"]||[]).push([[33],{8033:function(e,a,l){l.r(a),l.d(a,{default:function(){return sa}});var s=l(6768),n=l(5130),o=l(4232);const t={class:"app-container"},d={class:"header-left"},i={class:"main-content"},r={class:"content"},c={class:"toolbar"},u={class:"search-box"},k={class:"button-group"},p={class:"table-container desktop-table"},L={class:"user-table"},v={width:"50"},f=["value"],b={key:0,class:"gender-male"},m={key:1,class:"gender-female"},h={key:0},g={key:1},y={key:2},U={class:"action-cell"},C=["onClick"],w=["onClick"],E=["onClick"],X={key:0},_={class:"mobile-cards"},A={class:"card-header"},I={class:"card-checkbox"},P=["value"],V={class:"card-title"},W={class:"user-id"},$={class:"card-gender"},K={key:0,class:"gender-male"},M={key:1,class:"gender-female"},x={class:"card-body"},B={class:"card-info"},S={class:"info-item"},J={class:"value"},R={class:"info-item"},D={class:"value"},j={class:"info-item"},T={class:"value"},Q={key:0},q={key:1},N={key:2},F={class:"info-item"},O={class:"value"},z={class:"card-actions"},H=["onClick"],G=["onClick"],Y=["onClick"],Z={key:0,class:"no-data-card"},ee={key:0,class:"pagination"},ae=["disabled"],le=["onClick"],se=["disabled"],ne={class:"footer-info"},oe={key:0,class:"modal-overlay"},te={class:"user-modal"},de={class:"modal-header"},ie={class:"modal-body"},re={class:"form-group"},ce={class:"form-group"},ue={class:"radio-group"},ke={class:"radio-option"},pe={class:"radio-option"},Le={class:"form-group"},ve={class:"form-group"},fe={class:"form-group"},be={class:"form-group"},me={class:"form-group"},he={class:"modal-footer"},ge={key:1,class:"modal-overlay"},ye={class:"user-modal"},Ue={class:"modal-header"},Ce={class:"modal-body"},we={class:"form-group"},Ee={class:"form-group"},Xe={class:"radio-group"},_e={class:"radio-option"},Ae={class:"radio-option"},Ie={class:"form-group"},Pe={class:"form-group"},Ve={class:"form-group"},We={class:"form-group"},$e={class:"form-group"},Ke={class:"form-group"},Me={class:"modal-footer"},xe={key:2,class:"modal-overlay"},Be={class:"user-modal bind-info-modal"},Se={class:"modal-header"},Je={class:"modal-body"},Re={key:0,class:"bind-info-list"},De={class:"bind-info-header"},je={class:"bind-info-number"},Te={class:"bind-info-details"},Qe={class:"info-row"},qe={class:"value"},Ne={class:"info-row"},Fe={class:"value"},Oe={key:1,class:"no-bind-info"},ze={class:"modal-footer"};function He(e,a,l,He,Ge,Ye){return(0,s.uX)(),(0,s.CE)("div",t,[(0,s.Lk)("header",null,[(0,s.Lk)("div",d,[(0,s.Lk)("button",{class:"back-btn",onClick:a[0]||(a[0]=(...e)=>He.goBack&&He.goBack(...e))},a[38]||(a[38]=[(0,s.Lk)("i",{class:"fas fa-arrow-left"},null,-1),(0,s.Lk)("span",null,"返回",-1)])),a[39]||(a[39]=(0,s.Lk)("div",{class:"logo"},[(0,s.Lk)("i",{class:"fas fa-users-cog"}),(0,s.Lk)("h1",null,"用户管理")],-1))]),a[40]||(a[40]=(0,s.Lk)("div",{class:"user-info"},[(0,s.Lk)("i",{class:"fas fa-user-circle"}),(0,s.Lk)("span",null,"管理员")],-1))]),(0,s.Lk)("div",i,[(0,s.Lk)("div",r,[(0,s.Lk)("div",c,[(0,s.Lk)("div",u,[(0,s.bo)((0,s.Lk)("input",{type:"text",class:"search-input",placeholder:"搜索姓名","onUpdate:modelValue":a[1]||(a[1]=e=>He.searchParams.name=e)},null,512),[[n.Jo,He.searchParams.name]]),(0,s.bo)((0,s.Lk)("select",{class:"search-input","onUpdate:modelValue":a[2]||(a[2]=e=>He.searchParams.gender=e)},a[41]||(a[41]=[(0,s.Lk)("option",{value:""},"全部性别",-1),(0,s.Lk)("option",{value:"1"},"男",-1),(0,s.Lk)("option",{value:"2"},"女",-1)]),512),[[n.u1,He.searchParams.gender]]),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"search-input",placeholder:"手机号","onUpdate:modelValue":a[3]||(a[3]=e=>He.searchParams.phone=e)},null,512),[[n.Jo,He.searchParams.phone]])]),(0,s.Lk)("div",k,[(0,s.Lk)("button",{class:"btn btn-primary",onClick:a[4]||(a[4]=(...e)=>He.handleSearch&&He.handleSearch(...e))},a[42]||(a[42]=[(0,s.Lk)("i",{class:"fas fa-search"},null,-1),(0,s.eW)(" 搜索 ")])),(0,s.Lk)("button",{class:"btn btn-secondary",onClick:a[5]||(a[5]=(...e)=>He.handleShowAllUsers&&He.handleShowAllUsers(...e))},a[43]||(a[43]=[(0,s.Lk)("i",{class:"fas fa-list"},null,-1),(0,s.eW)(" 显示全部 ")])),(0,s.Lk)("button",{class:"btn btn-success",onClick:a[6]||(a[6]=(...e)=>He.openAddModal&&He.openAddModal(...e))},a[44]||(a[44]=[(0,s.Lk)("i",{class:"fas fa-plus"},null,-1),(0,s.eW)(" 添加用户 ")])),(0,s.Lk)("button",{class:"btn btn-danger",onClick:a[7]||(a[7]=(...e)=>He.openBulkDelete&&He.openBulkDelete(...e))},a[45]||(a[45]=[(0,s.Lk)("i",{class:"fas fa-trash-alt"},null,-1),(0,s.eW)(" 批量删除 ")]))])]),(0,s.Lk)("div",p,[(0,s.Lk)("table",L,[(0,s.Lk)("thead",null,[(0,s.Lk)("tr",null,[(0,s.Lk)("th",v,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[8]||(a[8]=e=>He.selectAll=e)},null,512),[[n.lH,He.selectAll]])]),a[46]||(a[46]=(0,s.Lk)("th",null,"ID",-1)),a[47]||(a[47]=(0,s.Lk)("th",null,"姓名",-1)),a[48]||(a[48]=(0,s.Lk)("th",null,"性别",-1)),a[49]||(a[49]=(0,s.Lk)("th",null,"手机号",-1)),a[50]||(a[50]=(0,s.Lk)("th",null,"身份证",-1)),a[51]||(a[51]=(0,s.Lk)("th",null,"角色",-1)),a[52]||(a[52]=(0,s.Lk)("th",null,"登录密码",-1)),a[53]||(a[53]=(0,s.Lk)("th",null,"操作",-1))])]),(0,s.Lk)("tbody",null,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(He.displayedUsers,(e=>((0,s.uX)(),(0,s.CE)("tr",{key:e.id},[(0,s.Lk)("td",null,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[9]||(a[9]=e=>He.selectedUsers=e),value:e.id},null,8,f),[[n.lH,He.selectedUsers]])]),(0,s.Lk)("td",null,(0,o.v_)(e.id),1),(0,s.Lk)("td",null,(0,o.v_)(e.name),1),(0,s.Lk)("td",null,[1===e.gender?((0,s.uX)(),(0,s.CE)("span",b,a[54]||(a[54]=[(0,s.Lk)("i",{class:"fas fa-male"},null,-1),(0,s.eW)(" 男 ")]))):((0,s.uX)(),(0,s.CE)("span",m,a[55]||(a[55]=[(0,s.Lk)("i",{class:"fas fa-female"},null,-1),(0,s.eW)(" 女 ")])))]),(0,s.Lk)("td",null,(0,o.v_)(e.phone),1),(0,s.Lk)("td",null,(0,o.v_)(e.idCard),1),(0,s.Lk)("td",null,[1===e.identity?((0,s.uX)(),(0,s.CE)("span",h,"老人")):2===e.identity?((0,s.uX)(),(0,s.CE)("span",g,"家属")):((0,s.uX)(),(0,s.CE)("span",y,"管理员"))]),(0,s.Lk)("td",null,(0,o.v_)(e.password),1),(0,s.Lk)("td",U,[(0,s.Lk)("button",{class:"action-btn edit-btn",onClick:a=>He.openEditModal(e)},a[56]||(a[56]=[(0,s.Lk)("i",{class:"fas fa-edit"},null,-1),(0,s.eW)(" 编辑 ")]),8,C),(0,s.Lk)("button",{class:"action-btn delete-btn",onClick:a=>He.deleteUser(e.id)},a[57]||(a[57]=[(0,s.Lk)("i",{class:"fas fa-trash-alt"},null,-1),(0,s.eW)(" 删除 ")]),8,w),3!==e.identity?((0,s.uX)(),(0,s.CE)("button",{key:0,class:"action-btn bind-btn",onClick:a=>He.queryBindInfo(e)},a[58]||(a[58]=[(0,s.Lk)("i",{class:"fas fa-link"},null,-1),(0,s.eW)(" 绑定信息 ")]),8,E)):(0,s.Q3)("",!0)])])))),128)),0===He.displayedUsers.length?((0,s.uX)(),(0,s.CE)("tr",X,a[59]||(a[59]=[(0,s.Lk)("td",{colspan:"9",style:{"text-align":"center",padding:"20px"}},"没有找到匹配的用户数据。请尝试搜索或添加新用户。",-1)]))):(0,s.Q3)("",!0)])])]),(0,s.Lk)("div",_,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(He.displayedUsers,(e=>((0,s.uX)(),(0,s.CE)("div",{key:e.id,class:"user-card"},[(0,s.Lk)("div",A,[(0,s.Lk)("div",I,[(0,s.bo)((0,s.Lk)("input",{type:"checkbox","onUpdate:modelValue":a[10]||(a[10]=e=>He.selectedUsers=e),value:e.id},null,8,P),[[n.lH,He.selectedUsers]])]),(0,s.Lk)("div",V,[(0,s.Lk)("h3",null,(0,o.v_)(e.name),1),(0,s.Lk)("span",W,"ID: "+(0,o.v_)(e.id),1)]),(0,s.Lk)("div",$,[1===e.gender?((0,s.uX)(),(0,s.CE)("span",K,a[60]||(a[60]=[(0,s.Lk)("i",{class:"fas fa-male"},null,-1),(0,s.eW)(" 男 ")]))):((0,s.uX)(),(0,s.CE)("span",M,a[61]||(a[61]=[(0,s.Lk)("i",{class:"fas fa-female"},null,-1),(0,s.eW)(" 女 ")])))])]),(0,s.Lk)("div",x,[(0,s.Lk)("div",B,[(0,s.Lk)("div",S,[a[62]||(a[62]=(0,s.Lk)("span",{class:"label"},"手机号:",-1)),(0,s.Lk)("span",J,(0,o.v_)(e.phone),1)]),(0,s.Lk)("div",R,[a[63]||(a[63]=(0,s.Lk)("span",{class:"label"},"身份证:",-1)),(0,s.Lk)("span",D,(0,o.v_)(e.idCard),1)]),(0,s.Lk)("div",j,[a[64]||(a[64]=(0,s.Lk)("span",{class:"label"},"角色:",-1)),(0,s.Lk)("span",T,[1===e.identity?((0,s.uX)(),(0,s.CE)("span",Q,"老人")):2===e.identity?((0,s.uX)(),(0,s.CE)("span",q,"家属")):((0,s.uX)(),(0,s.CE)("span",N,"管理员"))])]),(0,s.Lk)("div",F,[a[65]||(a[65]=(0,s.Lk)("span",{class:"label"},"密码:",-1)),(0,s.Lk)("span",O,(0,o.v_)(e.password),1)])]),(0,s.Lk)("div",z,[(0,s.Lk)("button",{class:"action-btn edit-btn",onClick:a=>He.openEditModal(e)},a[66]||(a[66]=[(0,s.Lk)("i",{class:"fas fa-edit"},null,-1),(0,s.eW)(" 编辑 ")]),8,H),(0,s.Lk)("button",{class:"action-btn delete-btn",onClick:a=>He.deleteUser(e.id)},a[67]||(a[67]=[(0,s.Lk)("i",{class:"fas fa-trash-alt"},null,-1),(0,s.eW)(" 删除 ")]),8,G),3!==e.identity?((0,s.uX)(),(0,s.CE)("button",{key:0,class:"action-btn bind-btn",onClick:a=>He.queryBindInfo(e)},a[68]||(a[68]=[(0,s.Lk)("i",{class:"fas fa-link"},null,-1),(0,s.eW)(" 绑定信息 ")]),8,Y)):(0,s.Q3)("",!0)])])])))),128)),0===He.displayedUsers.length?((0,s.uX)(),(0,s.CE)("div",Z,a[69]||(a[69]=[(0,s.Lk)("p",null,"没有找到匹配的用户数据。请尝试搜索或添加新用户。",-1)]))):(0,s.Q3)("",!0)]),He.totalPages>1?((0,s.uX)(),(0,s.CE)("div",ee,[(0,s.Lk)("button",{class:"page-btn",disabled:1===He.currentPage,onClick:a[11]||(a[11]=e=>He.currentPage--)},a[70]||(a[70]=[(0,s.Lk)("i",{class:"fas fa-chevron-left"},null,-1),(0,s.eW)(" 上一页 ")]),8,ae),((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(He.totalPages,(e=>((0,s.uX)(),(0,s.CE)("button",{key:e,class:(0,o.C4)(["page-btn",{active:He.currentPage===e}]),onClick:a=>He.currentPage=e},(0,o.v_)(e),11,le)))),128)),(0,s.Lk)("button",{class:"page-btn",disabled:He.currentPage===He.totalPages,onClick:a[12]||(a[12]=e=>He.currentPage++)},a[71]||(a[71]=[(0,s.eW)(" 下一页 "),(0,s.Lk)("i",{class:"fas fa-chevron-right"},null,-1)]),8,se)])):(0,s.Q3)("",!0)])]),(0,s.Lk)("div",ne," © 2025 用户管理系统 | 当前版本: 3.2.0 | 数据更新时间: "+(0,o.v_)(He.currentDate),1),He.showAddModal?((0,s.uX)(),(0,s.CE)("div",oe,[(0,s.Lk)("div",te,[(0,s.Lk)("div",de,[a[73]||(a[73]=(0,s.Lk)("h2",null,"添加新用户",-1)),(0,s.Lk)("button",{class:"close-btn",onClick:a[13]||(a[13]=e=>He.showAddModal=!1)},a[72]||(a[72]=[(0,s.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,s.Lk)("div",ie,[(0,s.Lk)("div",re,[a[74]||(a[74]=(0,s.Lk)("label",null,"姓名",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[14]||(a[14]=e=>He.newUser.name=e)},null,512),[[n.Jo,He.newUser.name]])]),(0,s.Lk)("div",ce,[a[77]||(a[77]=(0,s.Lk)("label",null,"性别",-1)),(0,s.Lk)("div",ue,[(0,s.Lk)("label",ke,[(0,s.bo)((0,s.Lk)("input",{type:"radio","onUpdate:modelValue":a[15]||(a[15]=e=>He.newUser.gender=e),value:"1"},null,512),[[n.XL,He.newUser.gender]]),a[75]||(a[75]=(0,s.eW)(" 男 "))]),(0,s.Lk)("label",pe,[(0,s.bo)((0,s.Lk)("input",{type:"radio","onUpdate:modelValue":a[16]||(a[16]=e=>He.newUser.gender=e),value:"2"},null,512),[[n.XL,He.newUser.gender]]),a[76]||(a[76]=(0,s.eW)(" 女 "))])])]),(0,s.Lk)("div",Le,[a[78]||(a[78]=(0,s.Lk)("label",null,"身份证号",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[17]||(a[17]=e=>He.newUser.idCard=e)},null,512),[[n.Jo,He.newUser.idCard]])]),(0,s.Lk)("div",ve,[a[79]||(a[79]=(0,s.Lk)("label",null,"手机号",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[18]||(a[18]=e=>He.newUser.phone=e)},null,512),[[n.Jo,He.newUser.phone]])]),(0,s.Lk)("div",fe,[a[80]||(a[80]=(0,s.Lk)("label",null,"地址",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[19]||(a[19]=e=>He.newUser.address=e)},null,512),[[n.Jo,He.newUser.address]])]),(0,s.Lk)("div",be,[a[82]||(a[82]=(0,s.Lk)("label",null,"角色",-1)),(0,s.bo)((0,s.Lk)("select",{class:"form-control","onUpdate:modelValue":a[20]||(a[20]=e=>He.newUser.identity=e)},a[81]||(a[81]=[(0,s.Lk)("option",{value:"1"},"老人",-1),(0,s.Lk)("option",{value:"2"},"家属",-1),(0,s.Lk)("option",{value:"3"},"管理员",-1)]),512),[[n.u1,He.newUser.identity]])]),(0,s.Lk)("div",me,[a[83]||(a[83]=(0,s.Lk)("label",null,"密码",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",class:"form-control","onUpdate:modelValue":a[21]||(a[21]=e=>He.newUser.password=e)},null,512),[[n.Jo,He.newUser.password]])])]),(0,s.Lk)("div",he,[(0,s.Lk)("button",{class:"btn",onClick:a[22]||(a[22]=e=>He.showAddModal=!1)},"取消"),(0,s.Lk)("button",{class:"btn btn-success",onClick:a[23]||(a[23]=(...e)=>He.addUser&&He.addUser(...e))},"添加")])])])):(0,s.Q3)("",!0),He.showEditModal?((0,s.uX)(),(0,s.CE)("div",ge,[(0,s.Lk)("div",ye,[(0,s.Lk)("div",Ue,[a[85]||(a[85]=(0,s.Lk)("h2",null,"编辑用户信息",-1)),(0,s.Lk)("button",{class:"close-btn",onClick:a[24]||(a[24]=e=>He.showEditModal=!1)},a[84]||(a[84]=[(0,s.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,s.Lk)("div",Ce,[(0,s.Lk)("div",we,[a[86]||(a[86]=(0,s.Lk)("label",null,"姓名",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[25]||(a[25]=e=>He.editingUser.name=e)},null,512),[[n.Jo,He.editingUser.name]])]),(0,s.Lk)("div",Ee,[a[89]||(a[89]=(0,s.Lk)("label",null,"性别",-1)),(0,s.Lk)("div",Xe,[(0,s.Lk)("label",_e,[(0,s.bo)((0,s.Lk)("input",{type:"radio","onUpdate:modelValue":a[26]||(a[26]=e=>He.editingUser.gender=e),value:"1"},null,512),[[n.XL,He.editingUser.gender]]),a[87]||(a[87]=(0,s.eW)(" 男 "))]),(0,s.Lk)("label",Ae,[(0,s.bo)((0,s.Lk)("input",{type:"radio","onUpdate:modelValue":a[27]||(a[27]=e=>He.editingUser.gender=e),value:"2"},null,512),[[n.XL,He.editingUser.gender]]),a[88]||(a[88]=(0,s.eW)(" 女 "))])])]),(0,s.Lk)("div",Ie,[a[90]||(a[90]=(0,s.Lk)("label",null,"身份证号",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[28]||(a[28]=e=>He.editingUser.idCard=e)},null,512),[[n.Jo,He.editingUser.idCard]])]),(0,s.Lk)("div",Pe,[a[91]||(a[91]=(0,s.Lk)("label",null,"手机号",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[29]||(a[29]=e=>He.editingUser.phone=e)},null,512),[[n.Jo,He.editingUser.phone]])]),(0,s.Lk)("div",Ve,[a[92]||(a[92]=(0,s.Lk)("label",null,"紧急联系人",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[30]||(a[30]=e=>He.editingUser.emergency_phone=e)},null,512),[[n.Jo,He.editingUser.emergency_phone]])]),(0,s.Lk)("div",We,[a[93]||(a[93]=(0,s.Lk)("label",null,"地址",-1)),(0,s.bo)((0,s.Lk)("input",{type:"text",class:"form-control","onUpdate:modelValue":a[31]||(a[31]=e=>He.editingUser.address=e)},null,512),[[n.Jo,He.editingUser.address]])]),(0,s.Lk)("div",$e,[a[95]||(a[95]=(0,s.Lk)("label",null,"角色",-1)),(0,s.bo)((0,s.Lk)("select",{class:"form-control","onUpdate:modelValue":a[32]||(a[32]=e=>He.editingUser.identity=e)},a[94]||(a[94]=[(0,s.Lk)("option",{value:"1"},"老人",-1),(0,s.Lk)("option",{value:"2"},"家属",-1),(0,s.Lk)("option",{value:"3"},"管理员",-1)]),512),[[n.u1,He.editingUser.identity]])]),(0,s.Lk)("div",Ke,[a[96]||(a[96]=(0,s.Lk)("label",null,"密码",-1)),(0,s.bo)((0,s.Lk)("input",{type:"password",class:"form-control","onUpdate:modelValue":a[33]||(a[33]=e=>He.editingUser.password=e),placeholder:"留空则不修改"},null,512),[[n.Jo,He.editingUser.password]])])]),(0,s.Lk)("div",Me,[(0,s.Lk)("button",{class:"btn",onClick:a[34]||(a[34]=e=>He.showEditModal=!1)},"取消"),(0,s.Lk)("button",{class:"btn btn-success",onClick:a[35]||(a[35]=(...e)=>He.updateUser&&He.updateUser(...e))},"保存")])])])):(0,s.Q3)("",!0),He.showBindInfoModal?((0,s.uX)(),(0,s.CE)("div",xe,[(0,s.Lk)("div",Be,[(0,s.Lk)("div",Se,[(0,s.Lk)("h2",null,[a[97]||(a[97]=(0,s.Lk)("i",{class:"fas fa-link"},null,-1)),(0,s.eW)(" "+(0,o.v_)(He.bindInfo.userName)+" 的"+(0,o.v_)(He.bindInfo.queryType)+"信息 ",1)]),(0,s.Lk)("button",{class:"close-btn",onClick:a[36]||(a[36]=e=>He.showBindInfoModal=!1)},a[98]||(a[98]=[(0,s.Lk)("i",{class:"fas fa-times"},null,-1)]))]),(0,s.Lk)("div",Je,[He.bindInfo.data&&He.bindInfo.data.length>0?((0,s.uX)(),(0,s.CE)("div",Re,[((0,s.uX)(!0),(0,s.CE)(s.FK,null,(0,s.pI)(He.bindInfo.data,((e,l)=>((0,s.uX)(),(0,s.CE)("div",{key:l,class:"bind-info-item"},[(0,s.Lk)("div",De,[(0,s.Lk)("span",je,(0,o.v_)(l+1),1),(0,s.Lk)("h4",null,(0,o.v_)(e.name||"未知"),1)]),(0,s.Lk)("div",Te,[(0,s.Lk)("div",Qe,[a[99]||(a[99]=(0,s.Lk)("i",{class:"fas fa-phone"},null,-1)),a[100]||(a[100]=(0,s.Lk)("span",{class:"label"},"手机号：",-1)),(0,s.Lk)("span",qe,(0,o.v_)(e.phone||"未知"),1)]),(0,s.Lk)("div",Ne,[a[101]||(a[101]=(0,s.Lk)("i",{class:"fas fa-users"},null,-1)),a[102]||(a[102]=(0,s.Lk)("span",{class:"label"},"关系：",-1)),(0,s.Lk)("span",Fe,(0,o.v_)(e.relation||"未知"),1)])])])))),128))])):((0,s.uX)(),(0,s.CE)("div",Oe,[a[103]||(a[103]=(0,s.Lk)("i",{class:"fas fa-info-circle"},null,-1)),(0,s.Lk)("p",null,(0,o.v_)(He.bindInfo.userName)+" 暂无"+(0,o.v_)(He.bindInfo.queryType)+"信息",1)]))]),(0,s.Lk)("div",ze,[(0,s.Lk)("button",{class:"btn btn-primary",onClick:a[37]||(a[37]=e=>He.showBindInfoModal=!1)},a[104]||(a[104]=[(0,s.Lk)("i",{class:"fas fa-check"},null,-1),(0,s.eW)(" 确定 ")]))])])])):(0,s.Q3)("",!0)])}l(4114),l(8111),l(1701);var Ge=l(144),Ye=l(1387),Ze=l(9871),ea={setup(){const e=(0,Ye.rd)(),a=(0,Ge.KR)((new Date).toLocaleDateString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit"})),l=(0,Ge.KR)([]),n=(0,Ge.KR)([]),o=(0,Ge.KR)(0),t=(0,Ge.KR)([]),d=(0,s.EW)({get:()=>n.value.length>0&&t.value.length===n.value.length,set:e=>{t.value=e?n.value.map((e=>e.id)):[]}}),i=(0,Ge.KR)(1),r=(0,Ge.KR)(10),c=(0,s.EW)((()=>{const e=Math.ceil(o.value/r.value);return e>0?e:1})),u=(0,Ge.Kh)({name:"",gender:"",phone:""}),k=(0,Ge.KR)(!0),p=(0,Ge.KR)(!1),L=(0,Ge.KR)(!1),v=(0,Ge.KR)(!1),f=(0,Ge.Kh)({userName:"",queryType:"",data:[]}),b=(0,Ge.Kh)({name:"",gender:"1",idCard:"",phone:"",address:"",identity:"1",password:""}),m=(0,Ge.KR)(null),h=Ze.A.API_BASE_URL,g=async()=>{try{let e="";const a=new URLSearchParams;a.append("page",i.value),a.append("pageSize",r.value),k.value||(u.name&&a.append("name",u.name),u.gender&&a.append("gender",u.gender),u.phone&&a.append("phone",u.phone)),e=k.value?`${h}/users/list`:`${h}/users`;const s=await fetch(`${e}?${a.toString()}`),t=await s.json();if(1===t.code){if(!t.data)return console.error("API返回数据结构异常，缺少data字段"),n.value=[],l.value=[],void(o.value=0);if(k.value){l.value=t.data||[],o.value=l.value.length;const e=(i.value-1)*r.value,a=e+r.value;n.value=l.value.slice(e,a)}else t.data&&t.data.rows&&Array.isArray(t.data.rows)?(n.value=t.data.rows||[],o.value=t.data.total||0):t.data&&t.data.records?(n.value=t.data.records||[],o.value=t.data.total||0):Array.isArray(t.data)?(n.value=t.data||[],o.value=t.data.length||0):(n.value=[],o.value=0)}else console.error("获取用户列表失败:",t.msg),alert(`获取用户列表失败: ${t.msg}`),n.value=[],l.value=[],o.value=0}catch(e){console.error("获取用户列表失败:",e),alert("获取用户列表失败，请检查网络连接"),n.value=[],l.value=[],o.value=0}},y=()=>{if(k.value){const e=(i.value-1)*r.value,a=e+r.value;n.value=l.value.slice(e,a)}},U=()=>{i.value=1,k.value=!1,g()},C=()=>{u.name="",u.gender="",u.phone="",i.value=1,k.value=!0,g()},w=async()=>{try{const e=await fetch(`${h}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)}),a=await e.json();1===a.code?(p.value=!1,k.value?C():U(),alert("用户添加成功")):alert(`添加失败: ${a.msg}`)}catch(e){console.error("添加用户失败:",e),alert("添加用户失败，请检查网络连接")}},E=async()=>{try{const e={id:m.value.id},a=["name","gender","idCard","phone","emergency_phone","address","identity"];a.forEach((a=>{void 0!==m.value[a]&&(e[a]=m.value[a])})),m.value.password&&(e.password=m.value.password);const l=await fetch(`${h}/users`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}),s=await l.json();1===s.code?(L.value=!1,k.value?C():U(),alert("用户信息更新成功")):alert(`更新失败: ${s.msg}`)}catch(e){console.error("更新用户失败:",e),alert("更新用户失败，请检查网络连接")}},X=async e=>{if(confirm("确定要删除这个用户吗？"))try{const a=await fetch(`${h}/users?ids=${e}`,{method:"DELETE"}),l=await a.json();1===l.code?(k.value?C():U(),alert("用户删除成功")):alert(`删除失败: ${l.msg}`)}catch(a){console.error("删除用户失败:",a),alert("删除用户失败，请检查网络连接")}},_=async e=>{try{let a="",l="";if(1===e.identity)a=`${h}/family/binding?id=${e.id}`,l="绑定家属";else{if(2!==e.identity)return console.warn("不支持的用户身份类型:",e.identity),void alert("该用户类型不支持查询绑定信息");a=`${h}/family/bind`,l="绑定老人"}const s=await fetch(a),n=await s.json();1===n.code?(f.userName=e.name||"未知用户",f.queryType=l,f.data=n.data||[],v.value=!0):(console.error("查询绑定信息失败:",n.msg),alert(`查询${l}信息失败: ${n.msg}`))}catch(a){console.error("查询绑定信息失败:",a),alert("查询绑定信息失败，请检查网络连接")}},A=async()=>{if(0!==t.value.length){if(confirm(`确定要删除选中的 ${t.value.length} 个用户吗？`))try{const e=t.value.join(","),a=await fetch(`${h}/users?ids=${e}`,{method:"DELETE"}),l=await a.json();1===l.code?(t.value=[],k.value?C():U(),alert("批量删除成功")):alert(`批量删除失败: ${l.msg}`)}catch(e){console.error("批量删除失败:",e),alert("批量删除失败，请检查网络连接")}}else alert("请至少选择一个用户")},I=()=>{Object.assign(b,{name:"",gender:"1",idCard:"",phone:"",address:"",identity:"1",password:""}),p.value=!0},P=e=>{try{m.value={id:e.id,name:e.name||"",gender:e.gender||"1",idCard:e.idCard||"",phone:e.phone||"",emergency_phone:e.emergency_phone||"",address:e.address||"",identity:e.identity||"1",password:""},L.value=!0}catch(a){console.error("打开编辑模态框时出错:",a),alert("打开编辑窗口失败，请重试")}};(0,s.wB)(i,(()=>{k.value?y():g()}));const V=()=>{e.push("/manager")};return(0,s.sV)((()=>{C()})),{currentDate:a,displayedUsers:n,selectedUsers:t,selectAll:d,currentPage:i,pageSize:r,totalPages:c,searchParams:u,showAddModal:p,showEditModal:L,showBindInfoModal:v,bindInfo:f,newUser:b,editingUser:m,openAddModal:I,openEditModal:P,addUser:w,updateUser:E,deleteUser:X,queryBindInfo:_,openBulkDelete:A,handleSearch:U,handleShowAllUsers:C,goBack:V}}},aa=l(1241);const la=(0,aa.A)(ea,[["render",He],["__scopeId","data-v-66cd8512"]]);var sa=la},9871:function(e,a){const l={API_BASE_URL:"http://14.103.237.241:8080"};a.A=l}}]);
//# sourceMappingURL=33.d9bfb821.js.map