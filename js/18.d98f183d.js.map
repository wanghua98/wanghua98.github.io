{"version":3,"file":"js/18.d98f183d.js","mappings":"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","sources":["webpack://vue-demo2/./src/views/Elder/AEldserve.vue","webpack://vue-demo2/./src/views/Elder/AEldserve.vue?19e0","webpack://vue-demo2/./src/utils/config.js"],"sourcesContent":["<template>\r\n  <div class=\"elder-serve\">\r\n    <h1 class=\"elder-serve-title\">老人陪诊服务</h1>\r\n\r\n    <section class=\"elder-serve-section\">\r\n      <h2 class=\"elder-serve-section-title\">1. 可预约陪诊员列表</h2>\r\n      <button @click=\"fetchAvailableChaperons\" class=\"elder-serve-button\">\r\n        刷新可预约列表\r\n      </button>\r\n      <div v-if=\"availableChaperons.length > 0\">\r\n        <ul class=\"elder-serve-list\">\r\n          <li\r\n            v-for=\"chaperon in availableChaperons\"\r\n            :key=\"chaperon.id\"\r\n            class=\"elder-serve-list-item\"\r\n          >\r\n            <p>\r\n              <strong>ID:</strong> {{ chaperon.id }}\r\n            </p>\r\n            <p>\r\n              <strong>姓名:</strong> {{ chaperon.name }}\r\n            </p>\r\n            <p>\r\n              <strong>性别:</strong> {{ chaperon.gender === \"1\" ? \"男\" : \"女\" }}\r\n            </p>\r\n            <p>\r\n              <strong>电话:</strong> {{ chaperon.phone }}\r\n            </p>\r\n            <p>\r\n              <strong>介绍:</strong> {{ chaperon.introduction }}\r\n            </p>\r\n            <button\r\n              @click=\"showBookDialog(chaperon)\"\r\n              class=\"elder-serve-button primary\"\r\n            >\r\n              预约TA\r\n            </button>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      <p v-else>暂无可用陪诊员。</p>\r\n    </section>\r\n\r\n    <div v-if=\"isBookDialogVisible\" class=\"elder-serve-dialog-overlay\">\r\n      <div class=\"elder-serve-dialog\">\r\n        <h3 class=\"elder-serve-dialog-title\">预约陪诊服务</h3>\r\n        <p>\r\n          您正在预约：{{ selectedChaperon.name }} (ID:\r\n          {{ selectedChaperon.id }})\r\n        </p>\r\n        <label for=\"serviceDate\">服务日期 (YYYY-MM-DD):</label>\r\n        <input\r\n          type=\"date\"\r\n          id=\"serviceDate\"\r\n          v-model=\"bookForm.serviceDate\"\r\n          required\r\n          class=\"elder-serve-input\"\r\n        />\r\n        <label for=\"descriptionOfSymptoms\">症状描述:</label>\r\n        <textarea\r\n          id=\"descriptionOfSymptoms\"\r\n          v-model=\"bookForm.descriptionOfSymptoms\"\r\n          class=\"elder-serve-textarea\"\r\n        ></textarea>\r\n        <label for=\"medicalHistory\">病史:</label>\r\n        <textarea\r\n          id=\"medicalHistory\"\r\n          v-model=\"bookForm.medicalHistory\"\r\n          class=\"elder-serve-textarea\"\r\n        ></textarea>\r\n        <label for=\"allergyHistory\">过敏史:</label>\r\n        <textarea\r\n          id=\"allergyHistory\"\r\n          v-model=\"bookForm.allergyHistory\"\r\n          class=\"elder-serve-textarea\"\r\n        ></textarea>\r\n        <div class=\"elder-serve-dialog-actions\">\r\n          <button @click=\"bookChaperon\" class=\"elder-serve-button primary\">\r\n            确认预约\r\n          </button>\r\n          <button @click=\"cancelBookDialog\" class=\"elder-serve-button\">\r\n            取消\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n\r\n    <section class=\"elder-serve-section\">\r\n      <h2 class=\"elder-serve-section-title\">2. 我的陪诊列表</h2>\r\n      <button @click=\"fetchMyBookings\" class=\"elder-serve-button\">\r\n        刷新我的陪诊\r\n      </button>\r\n      <div v-if=\"myBookings.length > 0\">\r\n        <ul class=\"elder-serve-list\">\r\n          <li\r\n            v-for=\"booking in myBookings\"\r\n            :key=\"booking.orderId\"\r\n            class=\"elder-serve-list-item\"\r\n          >\r\n            <p>\r\n              <strong>订单ID:</strong> {{ booking.orderId }}\r\n            </p>\r\n            <p>\r\n              <strong>预约时间:</strong> {{ booking.booktime }}\r\n            </p>\r\n            <p>\r\n              <strong>陪诊员姓名:</strong> {{ booking.name }}\r\n            </p>\r\n            <p>\r\n              <strong>陪诊员性别:</strong>\r\n              {{ booking.gender === \"1\" ? \"男\" : \"女\" }}\r\n            </p>\r\n            <p>\r\n              <strong>陪诊员电话:</strong> {{ booking.phone }}\r\n            </p>\r\n            <p>\r\n              <strong>陪诊员介绍:</strong> {{ booking.introduction }}\r\n            </p>\r\n            <button\r\n              @click=\"cancelBooking(booking.orderId)\"\r\n              class=\"elder-serve-button\"\r\n            >\r\n              取消预约\r\n            </button>\r\n          </li>\r\n        </ul>\r\n      </div>\r\n      <p v-else>您还没有陪诊预约。</p>\r\n    </section>\r\n\r\n    <div v-if=\"message\" :class=\"['elder-serve-message', messageType]\">\r\n      {{ message }}\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { ref, onMounted } from \"vue\";\r\nimport config from '@/utils/config';\r\n\r\n\r\n// 可预约陪诊员列表\r\nconst availableChaperons = ref([]);\r\n// 我的陪诊列表\r\nconst myBookings = ref([]);\r\n// 预约弹窗相关\r\nconst isBookDialogVisible = ref(false);\r\nconst selectedChaperon = ref(null);\r\nconst bookForm = ref({\r\n  chaperonId: \"\",\r\n  serviceDate: \"\",\r\n  descriptionOfSymptoms: \"\",\r\n  medicalHistory: \"\",\r\n  allergyHistory: \"\",\r\n});\r\n\r\n// 消息提示\r\nconst message = ref(\"\");\r\nconst messageType = ref(\"\"); // 'success' 或 'error'\r\n\r\n// 设置消息提示\r\nconst showMessage = (msg, type) => {\r\n  message.value = msg;\r\n  messageType.value = type;\r\n  setTimeout(() => {\r\n    message.value = \"\";\r\n    messageType.value = \"\";\r\n  }, 3000); // 3秒后消失\r\n};\r\n\r\n// 使用全局配置的API地址\r\nconst API_BASE_URL = config.API_BASE_URL;\r\n\r\n// 获取预约列表\r\nconst fetchAvailableChaperons = async () => {\r\n  try {\r\n    // 获取今天的日期，格式为YYYY-MM-DD\r\n    const today = new Date();\r\n    const year = today.getFullYear();\r\n    const month = String(today.getMonth() + 1).padStart(2, \"0\"); // 月份从0开始\r\n    const day = String(today.getDate()).padStart(2, \"0\");\r\n    const formattedDate = `${year}-${month}-${day}`;\r\n\r\n    const response = await fetch(\r\n      `${API_BASE_URL}/services?date=${formattedDate}`,\r\n      {\r\n        method: \"GET\",\r\n      }\r\n    );\r\n    const data = await response.json();\r\n    if (data.code === 1) {\r\n      availableChaperons.value = data.data.rows;\r\n      showMessage(\"可预约陪诊员列表获取成功！\", \"success\");\r\n    } else {\r\n      showMessage(`获取可预约陪诊员列表失败: ${data.msg}`, \"error\");\r\n    }\r\n  } catch (error) {\r\n    console.error(\"获取可预约陪诊员列表出错:\", error);\r\n    showMessage(\"获取可预约陪诊员列表网络请求失败，请检查网络！\", \"error\");\r\n  }\r\n};\r\n\r\n// 显示预约弹窗\r\nconst showBookDialog = (chaperon) => {\r\n  selectedChaperon.value = chaperon;\r\n  bookForm.value.chaperonId = chaperon.id;\r\n  // 默认服务日期为今天\r\n  const today = new Date();\r\n  bookForm.value.serviceDate = today.toISOString().split(\"T\")[0]; // YYYY-MM-DD\r\n  isBookDialogVisible.value = true;\r\n};\r\n\r\n// 取消预约弹窗\r\nconst cancelBookDialog = () => {\r\n  isBookDialogVisible.value = false;\r\n  selectedChaperon.value = null;\r\n  resetBookForm();\r\n};\r\n\r\n// 重置预约表单\r\nconst resetBookForm = () => {\r\n  bookForm.value = {\r\n    chaperonId: \"\",\r\n    serviceDate: \"\",\r\n    descriptionOfSymptoms: \"\",\r\n    medicalHistory: \"\",\r\n    allergyHistory: \"\",\r\n  };\r\n};\r\n\r\n// 预约陪诊服务\r\nconst bookChaperon = async () => {\r\n  if (!bookForm.value.chaperonId || !bookForm.value.serviceDate) {\r\n    showMessage(\"请选择陪诊员并填写服务日期！\", \"error\");\r\n    return;\r\n  }\r\n\r\n  try {\r\n\tconst token = localStorage.getItem('token');\r\n    const response = await fetch(`${API_BASE_URL}/services/book`, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n        'token': token\r\n      },\r\n      body: JSON.stringify(bookForm.value),\r\n    });\r\n    const data = await response.json();\r\n    if (data.code === 1) {\r\n      showMessage(\"预约成功！\", \"success\");\r\n      cancelBookDialog();\r\n      fetchMyBookings(); // 预约成功后刷新我的陪诊列表\r\n    } else {\r\n      showMessage(`预约失败: ${data.msg}`, \"error\");\r\n    }\r\n  } catch (error) {\r\n    console.error(\"预约陪诊服务出错:\", error);\r\n    showMessage(\"预约陪诊服务网络请求失败，请检查网络！\", \"error\");\r\n  }\r\n};\r\n\r\n// 获取陪诊列表\r\nconst fetchMyBookings = async () => {\r\n  try {\r\n    const response = await fetch(`${API_BASE_URL}/services/book`, {\r\n      method: \"GET\",\r\n    });\r\n    const data = await response.json();\r\n    if (data.code === 1) {\r\n      myBookings.value = data.data.rows;\r\n      showMessage(\"我的陪诊列表获取成功！\", \"success\");\r\n    } else {\r\n      showMessage(`获取我的陪诊列表失败: ${data.msg}`, \"error\");\r\n    }\r\n  } catch (error) {\r\n    console.error(\"获取我的陪诊列表出错:\", error);\r\n    showMessage(\"获取我的陪诊列表网络请求失败，请检查网络！\", \"error\");\r\n  }\r\n};\r\n\r\n// 取消陪诊服务\r\nconst cancelBooking = async (orderId) => {\r\n  if (!confirm(`确定要取消订单ID为 ${orderId} 的预约吗？`)) {\r\n    return;\r\n  }\r\n\r\n  try {\r\n    const response = await fetch(\r\n      `${API_BASE_URL}/services/book?chaperonId=${orderId}`,\r\n      {\r\n        method: \"DELETE\",\r\n      }\r\n    );\r\n    const data = await response.json();\r\n    if (data.code === 1) {\r\n      showMessage(\"取消预约成功！\", \"success\");\r\n      fetchMyBookings(); // 取消成功后刷新我的陪诊列表\r\n    } else {\r\n      showMessage(`取消预约失败: ${data.msg}`, \"error\");\r\n    }\r\n  } catch (error) {\r\n    console.error(\"取消陪诊服务出错:\", error);\r\n    showMessage(\"取消陪诊服务网络请求失败，请检查网络！\", \"error\");\r\n  }\r\n};\r\n\r\n// 组件挂载时获取初始数据\r\nonMounted(() => {\r\n  fetchAvailableChaperons();\r\n  fetchMyBookings();\r\n});\r\n</script>\r\n\r\n<style scoped>\r\n.elder-serve {\r\n  font-family: \"Helvetica Neue\", Arial, sans-serif;\r\n  max-width: 900px;\r\n  margin: 20px auto;\r\n  padding: 30px;\r\n  background-color: #f9f9f9;\r\n  border-radius: 10px;\r\n  box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.elder-serve-title {\r\n  color: #34495e;\r\n  text-align: center;\r\n  margin-bottom: 30px;\r\n  border-bottom: 2px solid #ecf0f1;\r\n  padding-bottom: 15px;\r\n}\r\n\r\n.elder-serve-section {\r\n  margin-bottom: 40px;\r\n  padding: 25px;\r\n  background-color: #fff;\r\n  border-radius: 8px;\r\n  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.08);\r\n}\r\n\r\n.elder-serve-section-title {\r\n  color: #2c3e50;\r\n  margin-bottom: 20px;\r\n  border-bottom: 1px solid #ddd;\r\n  padding-bottom: 10px;\r\n}\r\n\r\n.elder-serve-button {\r\n  background-color: #3498db;\r\n  color: white;\r\n  padding: 12px 20px;\r\n  border: none;\r\n  border-radius: 5px;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  margin-right: 10px;\r\n  margin-bottom: 15px;\r\n  transition: background-color 0.3s ease;\r\n}\r\n\r\n.elder-serve-button.primary {\r\n  background-color: #2ecc71;\r\n}\r\n\r\n.elder-serve-button:hover {\r\n  background-color: #2980b9;\r\n}\r\n\r\n.elder-serve-list {\r\n  list-style-type: none;\r\n  padding: 0;\r\n}\r\n\r\n.elder-serve-list-item {\r\n  background-color: #fefefe;\r\n  border: 1px solid #eee;\r\n  border-radius: 8px;\r\n  margin-bottom: 20px;\r\n  padding: 20px;\r\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.06);\r\n}\r\n\r\n.elder-serve-list-item p {\r\n  margin: 8px 0;\r\n  color: #555;\r\n}\r\n\r\n.elder-serve-list-item strong {\r\n  color: #333;\r\n}\r\n\r\n.elder-serve-dialog-overlay {\r\n  position: fixed;\r\n  top: 0;\r\n  left: 0;\r\n  width: 100%;\r\n  height: 100%;\r\n  background-color: rgba(0, 0, 0, 0.5);\r\n  display: flex;\r\n  justify-content: center;\r\n  align-items: center;\r\n  z-index: 1000;\r\n}\r\n\r\n.elder-serve-dialog {\r\n  background-color: white;\r\n  padding: 40px;\r\n  border-radius: 12px;\r\n  box-shadow: 0 8px 20px rgba(0, 0, 0, 0.2);\r\n  width: 500px;\r\n  max-width: 90%;\r\n}\r\n\r\n.elder-serve-dialog-title {\r\n  margin-top: 0;\r\n  color: #34495e;\r\n  border-bottom: 1px solid #ddd;\r\n  padding-bottom: 15px;\r\n  margin-bottom: 25px;\r\n  text-align: center;\r\n}\r\n\r\n.elder-serve-dialog label {\r\n  display: block;\r\n  margin-bottom: 8px;\r\n  font-weight: 500;\r\n  color: #333;\r\n}\r\n\r\n.elder-serve-input,\r\n.elder-serve-textarea {\r\n  width: calc(100% - 20px);\r\n  padding: 12px;\r\n  margin-bottom: 20px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 6px;\r\n  font-size: 16px;\r\n  color: #444;\r\n}\r\n\r\n.elder-serve-textarea {\r\n  height: 100px;\r\n}\r\n\r\n.elder-serve-dialog-actions {\r\n  text-align: right;\r\n  margin-top: 30px;\r\n}\r\n\r\n.elder-serve-dialog-actions button {\r\n  margin-left: 15px;\r\n}\r\n\r\n.elder-serve-message {\r\n  padding: 15px;\r\n  margin-top: 30px;\r\n  border-radius: 8px;\r\n  text-align: center;\r\n  font-weight: bold;\r\n  box-shadow: 0 2px 5px rgba(0, 0, 0, 0.05);\r\n}\r\n\r\n.elder-serve-message.success {\r\n  background-color: #e6f9e9;\r\n  color: #27ae60;\r\n  border: 1px solid #b9e5c7;\r\n}\r\n\r\n.elder-serve-message.error {\r\n  background-color: #fdedec;\r\n  color: #e74c3c;\r\n  border: 1px solid #f5c6cb;\r\n}\r\n</style>","import script from \"./AEldserve.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./AEldserve.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./AEldserve.vue?vue&type=style&index=0&id=924b064e&scoped=true&lang=css\"\n\nimport exportComponent from \"../../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-924b064e\"]])\n\nexport default __exports__","// 全局配置文件\nconst config = {\n  // 后端API基础地址\n  API_BASE_URL: 'https://14.103.237.241'\n};\n\nexport default config;"],"names":["availableChaperons","ref","myBookings","isBookDialogVisible","selectedChaperon","bookForm","chaperonId","serviceDate","descriptionOfSymptoms","medicalHistory","allergyHistory","message","messageType","showMessage","msg","type","value","setTimeout","API_BASE_URL","config","fetchAvailableChaperons","async","today","Date","year","getFullYear","month","String","getMonth","padStart","day","getDate","formattedDate","response","fetch","method","data","json","code","rows","error","console","showBookDialog","chaperon","id","toISOString","split","cancelBookDialog","resetBookForm","bookChaperon","token","localStorage","getItem","headers","body","JSON","stringify","fetchMyBookings","cancelBooking","confirm","orderId","onMounted","__exports__"],"sourceRoot":""}