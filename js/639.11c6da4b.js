"use strict";(self["webpackChunkvue_demo2"]=self["webpackChunkvue_demo2"]||[]).push([[639],{8639:function(e,s,r){r.r(s),r.d(s,{default:function(){return A}});r(4114),r(8111),r(3579);var a=r(6768),o=r(5130),d=r(4232),l=r(144),n=r(1387),t=r(9871);const i={class:"registration-container"},p={class:"registration-form"},u={class:"form-container"},c={class:"form-group"},m={key:0,class:"error-message"},k={class:"form-group"},h={class:"form-group full-width"},v={key:0,class:"error-message"},L={class:"form-group full-width"},g={key:0,class:"error-message"},w={class:"form-group"},f={key:0,class:"error-message"},C={class:"form-group"},b={class:"form-group full-width"},y={key:0,class:"error-message"},_={class:"login-link"};var q={__name:"Register",setup(e){const s=(0,n.rd)(),r=(0,l.Kh)({name:"",gender:"男",idCard:"",address:"",phone:"",identity:"老年人",password:""}),q=(0,l.Kh)({name:"",idCard:"",address:"",phone:"",password:""}),E=()=>{s.push("/login")},U=()=>{r.name.trim()?r.name.trim().length<2?q.name="姓名至少需要2个字符":q.name="":q.name="姓名是必填项"},A=()=>{/^\d{17}[\dXx]$/.test(r.idCard)?q.idCard="":q.idCard="身份证号格式不正确"},B=()=>{r.address.trim()?r.address.trim().length<5?q.address="地址信息太短":q.address="":q.address="家庭地址是必填项"},V=()=>{/^1[3-9]\d{9}$/.test(r.phone)?q.phone="":q.phone="手机号格式不正确"},X=()=>{r.password.length<8?q.password="密码至少8位字符":/[A-Z]/.test(r.password)?/[0-9]/.test(r.password)?q.password="":q.password="密码需要包含至少一个数字":q.password="密码需要包含至少一个大写字母"},x=()=>(U(),A(),B(),V(),X(),!Object.values(q).some((e=>""!==e))),J=async()=>{if(!x())return void alert("请正确填写所有字段");const e={name:r.name.trim(),gender:"男"===r.gender?1:0,idCard:r.idCard.trim(),phone:r.phone.trim(),address:r.address.trim(),identity:$(r.identity),password:r.password.trim()};try{console.log("提交数据:",e);const r=await fetch(`${t.A.API_BASE_URL}/register`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!r.ok)throw new Error(`HTTP错误! 状态码: ${r.status}`);const a=await r.json();console.log("注册成功响应:",a),alert("注册成功！即将跳转到登录页面"),s.push("/login")}catch(a){alert("注册失败，请稍后重试"),console.error("注册请求失败:",a)}},$=e=>{const s={"老年人":1,"家属":2,"社区管理员":3};return s[e]||1};return(e,s)=>((0,a.uX)(),(0,a.CE)("div",i,[(0,a.Lk)("div",p,[(0,a.Lk)("div",{class:"back-arrow",onClick:E},s[7]||(s[7]=[(0,a.Lk)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},[(0,a.Lk)("path",{d:"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z"})],-1)])),s[19]||(s[19]=(0,a.Lk)("div",{class:"header"},[(0,a.Lk)("h2",null,"用户注册"),(0,a.Lk)("p",null,"填写以下信息创建您的账户")],-1)),(0,a.Lk)("form",{onSubmit:(0,o.D$)(J,["prevent"])},[(0,a.Lk)("div",u,[(0,a.Lk)("div",c,[s[8]||(s[8]=(0,a.Lk)("label",{class:"required"},"姓名：",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",class:(0,d.C4)(["form-control",{invalid:q.name}]),"onUpdate:modelValue":s[0]||(s[0]=e=>r.name=e),placeholder:"请输入姓名",required:"",onBlur:U},null,34),[[o.Jo,r.name]]),q.name?((0,a.uX)(),(0,a.CE)("span",m,(0,d.v_)(q.name),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",k,[s[10]||(s[10]=(0,a.Lk)("label",{class:"required"},"性别：",-1)),(0,a.bo)((0,a.Lk)("select",{class:"form-control","onUpdate:modelValue":s[1]||(s[1]=e=>r.gender=e),required:""},s[9]||(s[9]=[(0,a.Lk)("option",{value:"男"},"男",-1),(0,a.Lk)("option",{value:"女"},"女",-1)]),512),[[o.u1,r.gender]])]),(0,a.Lk)("div",h,[s[11]||(s[11]=(0,a.Lk)("label",{class:"required"},"身份证号：",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",class:(0,d.C4)(["form-control",{invalid:q.idCard}]),"onUpdate:modelValue":s[2]||(s[2]=e=>r.idCard=e),placeholder:"请输入18位有效身份证号",required:"",onBlur:A},null,34),[[o.Jo,r.idCard]]),q.idCard?((0,a.uX)(),(0,a.CE)("span",v,(0,d.v_)(q.idCard),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",L,[s[12]||(s[12]=(0,a.Lk)("label",{class:"required"},"家庭地址：",-1)),(0,a.bo)((0,a.Lk)("input",{type:"text",class:(0,d.C4)(["form-control",{invalid:q.address}]),"onUpdate:modelValue":s[3]||(s[3]=e=>r.address=e),placeholder:"请输入家庭地址",required:"",onBlur:B},null,34),[[o.Jo,r.address]]),q.address?((0,a.uX)(),(0,a.CE)("span",g,(0,d.v_)(q.address),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",w,[s[13]||(s[13]=(0,a.Lk)("label",{class:"required"},"手机号：",-1)),(0,a.bo)((0,a.Lk)("input",{type:"tel",class:(0,d.C4)(["form-control",{invalid:q.phone}]),"onUpdate:modelValue":s[4]||(s[4]=e=>r.phone=e),placeholder:"请输入11位手机号",onBlur:V},null,34),[[o.Jo,r.phone]]),q.phone?((0,a.uX)(),(0,a.CE)("span",f,(0,d.v_)(q.phone),1)):(0,a.Q3)("",!0)]),(0,a.Lk)("div",C,[s[15]||(s[15]=(0,a.Lk)("label",null,"身份：",-1)),(0,a.bo)((0,a.Lk)("select",{class:"form-control","onUpdate:modelValue":s[5]||(s[5]=e=>r.identity=e)},s[14]||(s[14]=[(0,a.Lk)("option",{value:"老年人"},"老年人",-1),(0,a.Lk)("option",{value:"家属"},"家属",-1),(0,a.Lk)("option",{value:"社区管理员"},"社区管理员",-1)]),512),[[o.u1,r.identity]])]),(0,a.Lk)("div",b,[s[16]||(s[16]=(0,a.Lk)("label",{class:"required"},"登录密码：",-1)),(0,a.bo)((0,a.Lk)("input",{type:"password",class:(0,d.C4)(["form-control",{invalid:q.password}]),"onUpdate:modelValue":s[6]||(s[6]=e=>r.password=e),placeholder:"至少8位字符",minlength:"8",required:"",onBlur:X},null,34),[[o.Jo,r.password]]),q.password?((0,a.uX)(),(0,a.CE)("span",y,(0,d.v_)(q.password),1)):(0,a.Q3)("",!0)]),s[18]||(s[18]=(0,a.Lk)("button",{type:"submit",class:"submit-btn"},"创建账户",-1)),(0,a.Lk)("div",_,[s[17]||(s[17]=(0,a.eW)(" 已有账号？")),(0,a.Lk)("a",{href:"#",onClick:(0,o.D$)(E,["prevent"])},"返回登录")])])],32)])]))}},E=r(1241);const U=(0,E.A)(q,[["__scopeId","data-v-58b71302"]]);var A=U},9871:function(e,s){const r={API_BASE_URL:"https://14.103.237.241"};s.A=r}}]);
//# sourceMappingURL=639.11c6da4b.js.map