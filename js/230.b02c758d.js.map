{"version":3,"file":"js/230.b02c758d.js","mappings":"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","sources":["webpack://vue-demo2/./src/views/Login.vue","webpack://vue-demo2/./src/views/Login.vue?240b","webpack://vue-demo2/./src/utils/config.js"],"sourcesContent":["<template>\r\n  <div class=\"login-container\">\r\n    <div class=\"left-panel\"></div>\r\n    <div class=\"right-panel\">\r\n      <div class=\"logo\">\r\n        <img src=\"../assets/images/logo.png\" alt=\"Logo\">\r\n      </div>\r\n      <h2>智慧养老服务管理平台</h2>\r\n      <form @submit.prevent=\"handleSubmit\">\r\n        <div class=\"input-group\">\r\n          <input \r\n            type=\"text\" \r\n            id=\"username\" \r\n            v-model=\"username\" \r\n            placeholder=\"请输入账号\"\r\n          >\r\n        </div>\r\n        <div class=\"input-group\">\r\n          <input \r\n            type=\"password\" \r\n            id=\"password\" \r\n            v-model=\"password\" \r\n            placeholder=\"请输入密码\"\r\n          >\r\n        </div>\r\n        <button type=\"submit\" class=\"login\" :disabled=\"isLoading\">\r\n          {{ isLoading ? '登录中...' : '登录' }}\r\n        </button>\r\n        <button \r\n          type=\"button\" \r\n          @click=\"goToRegister\" \r\n          class=\"signup\"\r\n        >\r\n          注册\r\n        </button>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport config from '@/utils/config';\r\n\r\nexport default {\r\n  name: 'Login',\r\n  data() {\r\n    return {\r\n      username: '',\r\n      password: '',\r\n      isLoading: false\r\n    }\r\n  },\r\n  methods: {\r\n    async handleSubmit() {\r\n      // 增强输入验证\r\n      if (!this.username.trim()) {\r\n        alert('请输入手机号码')\r\n        return\r\n      }\r\n      if (!this.password.trim()) {\r\n        alert('请输入密码')\r\n        return\r\n      }\r\n\r\n      // 手机号格式简单验证\r\n      if (!/^\\d{11}$/.test(this.username.trim())) {\r\n        alert('请输入有效的11位手机号码')\r\n        return\r\n      }\r\n\r\n      this.isLoading = true\r\n\r\n      try {\r\n        const response = await fetch(`${config.API_BASE_URL}/login`, {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json'\r\n          },\r\n          body: JSON.stringify({\r\n            phone: this.username.trim(),\r\n            password: this.password.trim()\r\n          })\r\n        })\r\n\r\n        const result = await response.json()\r\n\r\n        // 同时判断HTTP状态码和业务状态码\r\n        if (response.ok && result.code === 1) {\r\n          // 安全存储token\r\n          localStorage.setItem('token', result.data.token)\r\n          // 存储用户基本信息（根据接口返回数据）\r\n          localStorage.setItem('userInfo', JSON.stringify({\r\n            id: result.data.id,\r\n            name: result.data.name,\r\n            identity: result.data.identity\r\n          }))\r\n        \r\n          // 根据身份跳转不同页面（示例逻辑，可根据实际需求调整）\r\n          if (result.data.identity === 1) {\r\n            this.$router.push('/elder')\r\n          } \r\n\t\t  else if (result.data.identity === 2) {\r\n            this.$router.push('/family')\r\n          } \r\n\t\t  else if (result.data.identity === 3) {\r\n\t\t    this.$router.push('/manager')\r\n\t\t  } \r\n        } else {\r\n          // 优先使用接口返回的错误信息\r\n          alert(result.msg || '登录失败，请检查手机号和密码')\r\n        }\r\n      } catch (error) {\r\n        console.error('请求失败:', error)\r\n        alert('网络连接异常，请检查网络后重试')\r\n      } finally {\r\n        this.isLoading = false\r\n      }\r\n    },\r\n    goToRegister() {\r\n      this.$router.push('/register')\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style>\r\n.login-container {\r\n  display: flex;\r\n  height: 100vh;\r\n  overflow: hidden;\r\n}\r\n\r\n.left-panel {\r\n  background-image: url('../assets/images/background_image.jpg');\r\n  background-size: cover;\r\n  background-position: center;\r\n  width: 70%;\r\n  position: relative;\r\n}\r\n\r\n.left-panel::before {\r\n  content: '';\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n}\r\n\r\n.right-panel {\r\n  width: 30%;\r\n  display: flex;\r\n  flex-direction: column;\r\n  justify-content: center;\r\n  align-items: center;\r\n  background-color: #fff;\r\n  padding: 60px;\r\n  box-shadow: -4px 0 20px rgba(0, 0, 0, 0.1);\r\n}\r\n\r\n.logo img {\r\n  width: 120px;\r\n  margin-bottom: 30px;\r\n  transition: transform 0.3s ease;\r\n}\r\n\r\nh2 {\r\n  margin-left: 30px;\r\n  margin-bottom: 30px;\r\n  font-size: 28px;\r\n  color: #333;\r\n  font-weight: 600;\r\n}\r\n\r\n.input-group {\r\n  margin-bottom: 25px;\r\n  width: 100%;\r\n}\r\n\r\n.input-group label {\r\n  display: block;\r\n  margin-bottom: 10px;\r\n  font-size: 14px;\r\n  color: #555;\r\n}\r\n\r\n.input-group input {\r\n  width: 100%;\r\n  padding: 15px;\r\n  border: 1px solid #ddd;\r\n  border-radius: 8px;\r\n  font-size: 16px;\r\n  transition: border-color 0.3s ease, box-shadow 0.3s ease;\r\n}\r\n\r\n.input-group input:focus {\r\n  border-color: #007bff;\r\n  box-shadow: 0 0 8px rgba(0, 123, 255, 0.2);\r\n  outline: none;\r\n}\r\n\r\n#username {\r\n  margin-right: 100px;\r\n}\r\n\r\nbutton {\r\n  width: 100%;\r\n  padding: 15px;\r\n  background-color: #007bff;\r\n  color: #fff;\r\n  border: none;\r\n  border-radius: 8px;\r\n  cursor: pointer;\r\n  font-size: 16px;\r\n  font-weight: 600;\r\n  transition: background-color 0.3s ease, transform 0.2s ease;\r\n  margin-top: 10px;\r\n}\r\n\r\nbutton:hover {\r\n  background-color: #0056b3;\r\n  transform: translateY(-2px);\r\n}\r\n\r\nbutton:active {\r\n  transform: translateY(0);\r\n}\r\n\r\n.login {\r\n  margin-left: 15px;\r\n}\r\n\r\n.signup {\r\n  margin-left: 15px;\r\n}\r\n\r\n/* 响应式设计 */\r\n@media (max-width: 768px) {\r\n  .login-container {\r\n    flex-direction: column;\r\n  }\r\n\r\n  .left-panel {\r\n    width: 100%;\r\n    height: 40vh;\r\n  }\r\n\r\n  .right-panel {\r\n    width: 100%;\r\n    height: 60vh;\r\n    padding: 40px;\r\n  }\r\n}\r\n</style>","import { render } from \"./Login.vue?vue&type=template&id=557a5ff2\"\nimport script from \"./Login.vue?vue&type=script&lang=js\"\nexport * from \"./Login.vue?vue&type=script&lang=js\"\n\nimport \"./Login.vue?vue&type=style&index=0&id=557a5ff2&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['render',render]])\n\nexport default __exports__","// 全局配置文件\nconst config = {\n  // 后端API基础地址\n  API_BASE_URL: 'https://wanghua935.dpdns.org:8080'\n};\n\nexport default config;"],"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","src","_imports_0","alt","onSubmit","_cache","_withModifiers","args","$options","handleSubmit","_hoisted_3","type","id","$event","$data","username","placeholder","_hoisted_4","password","disabled","isLoading","_hoisted_5","onClick","goToRegister","name","data","methods","this","trim","test","response","fetch","config","API_BASE_URL","method","headers","body","JSON","stringify","phone","result","json","ok","code","localStorage","setItem","token","identity","$router","push","alert","msg","error","console","__exports__","render"],"sourceRoot":""}