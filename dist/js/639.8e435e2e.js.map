{"version":3,"file":"js/639.8e435e2e.js","mappings":"kvBA4HA,MAAMA,GAASC,EAAAA,EAAAA,MAGTC,GAAWC,EAAAA,EAAAA,IAAS,CACxBC,KAAM,GACNC,OAAQ,IACRC,OAAQ,GACRC,QAAS,GACTC,MAAO,GACPC,SAAU,MACVC,SAAU,KAINC,GAASR,EAAAA,EAAAA,IAAS,CACtBC,KAAM,GACNE,OAAQ,GACRC,QAAS,GACTC,MAAO,GACPE,SAAU,KAINE,EAASA,KACbZ,EAAOa,KAAK,SAAS,EAIjBC,EAAeA,KACdZ,EAASE,KAAKW,OAERb,EAASE,KAAKW,OAAOC,OAAS,EACvCL,EAAOP,KAAO,aAEdO,EAAOP,KAAO,GAJdO,EAAOP,KAAO,QAKhB,EAIIa,EAAiBA,KAChB,iBAAiBC,KAAKhB,EAASI,QAGlCK,EAAOL,OAAS,GAFhBK,EAAOL,OAAS,WAGlB,EAIIa,EAAkBA,KACjBjB,EAASK,QAAQQ,OAEXb,EAASK,QAAQQ,OAAOC,OAAS,EAC1CL,EAAOJ,QAAU,SAEjBI,EAAOJ,QAAU,GAJjBI,EAAOJ,QAAU,UAKnB,EAIIa,EAAgBA,KACf,gBAAgBF,KAAKhB,EAASM,OAGjCG,EAAOH,MAAQ,GAFfG,EAAOH,MAAQ,UAGjB,EAIIa,EAAmBA,KACnBnB,EAASQ,SAASM,OAAS,EAC7BL,EAAOD,SAAW,WACR,QAAQQ,KAAKhB,EAASQ,UAEtB,QAAQQ,KAAKhB,EAASQ,UAGhCC,EAAOD,SAAW,GAFlBC,EAAOD,SAAW,eAFlBC,EAAOD,SAAW,gBAKpB,EAIIY,EAAeA,KACnBR,IACAG,IACAE,IACAC,IACAC,KACQE,OAAOC,OAAOb,GAAQc,MAAKC,GAAmB,KAAVA,KAIxCC,EAAeC,UACnB,IAAKN,IAEH,YADAO,MAAM,aAKR,MAAMC,EAAc,CAClB1B,KAAMF,EAASE,KAAKW,OACpBV,OAA4B,MAApBH,EAASG,OAAiB,EAAI,EACtCC,OAAQJ,EAASI,OAAOS,OACxBP,MAAON,EAASM,MAAMO,OACtBR,QAASL,EAASK,QAAQQ,OAC1BN,SAAUsB,EAAgB7B,EAASO,UACnCC,SAAUR,EAASQ,SAASK,QAI9B,IACEiB,QAAQC,IAAI,QAASH,GAGrB,MAAMI,QAAiBC,MAAM,GAAGC,EAAAA,EAAOC,wBAAyB,CAC9DC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBC,KAAMC,KAAKC,UAAUZ,KAGvB,IAAKI,EAASS,GACZ,MAAM,IAAIC,MAAM,gBAAgBV,EAASW,UAG3C,MAAMC,QAAaZ,EAASa,OAC5Bf,QAAQC,IAAI,UAAWa,GAEvBjB,MAAM,kBACN7B,EAAOa,KAAK,SACd,CAAE,MAAOa,GACPG,MAAM,cACNG,QAAQN,MAAM,UAAWA,EAC3B,GAIIK,EAAmBtB,IACvB,MAAMuC,EAAc,CAClB,MAAO,EACP,KAAM,EACN,QAAS,GAEX,OAAOA,EAAYvC,IAAa,CAAC,E,qoGCrQnC,MAAMwC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O,qBCPA,MAAMb,EAAS,CAEbC,aAAc,8BAGhB,K","sources":["webpack://vue-demo2/./src/views/Register.vue","webpack://vue-demo2/./src/views/Register.vue?157d","webpack://vue-demo2/./src/utils/config.js"],"sourcesContent":["<template>\r\n  <div class=\"registration-container\">\r\n    <div class=\"registration-form\">\r\n      <!-- 返回箭头 -->\r\n      <div class=\"back-arrow\" @click=\"goBack\">\r\n        <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 24 24\">\r\n          <path d=\"M20 11H7.83l5.59-5.59L12 4l-8 8 8 8 1.41-1.41L7.83 13H20v-2z\"/>\r\n        </svg>\r\n      </div>\r\n      \r\n      <div class=\"header\">\r\n        <h2>用户注册</h2>\r\n        <p>填写以下信息创建您的账户</p>\r\n      </div>\r\n      \r\n      <form @submit.prevent=\"handleSubmit\">\r\n        <div class=\"form-container\">\r\n          <div class=\"form-group\">\r\n            <label class=\"required\">姓名：</label>\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              v-model=\"formData.name\"\r\n              placeholder=\"请输入姓名\"\r\n              required\r\n              :class=\"{ 'invalid': errors.name }\"\r\n              @blur=\"validateName\"\r\n            >\r\n            <span class=\"error-message\" v-if=\"errors.name\">{{ errors.name }}</span>\r\n          </div>\r\n\r\n          <div class=\"form-group\">\r\n            <label class=\"required\">性别：</label>\r\n            <select\r\n              class=\"form-control\"\r\n              v-model=\"formData.gender\"\r\n              required\r\n            >\r\n              <option value=\"男\">男</option>\r\n              <option value=\"女\">女</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div class=\"form-group full-width\">\r\n            <label class=\"required\">身份证号：</label>\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              v-model=\"formData.idCard\"\r\n              placeholder=\"请输入18位有效身份证号\"\r\n              required\r\n              :class=\"{ 'invalid': errors.idCard }\"\r\n              @blur=\"validateIdCard\"\r\n            >\r\n            <span class=\"error-message\" v-if=\"errors.idCard\">{{ errors.idCard }}</span>\r\n          </div>\r\n\r\n          <div class=\"form-group full-width\">\r\n            <label class=\"required\">家庭地址：</label>\r\n            <input\r\n              type=\"text\"\r\n              class=\"form-control\"\r\n              v-model=\"formData.address\"\r\n              placeholder=\"请输入家庭地址\"\r\n              required\r\n              :class=\"{ 'invalid': errors.address }\"\r\n              @blur=\"validateAddress\"\r\n            >\r\n            <span class=\"error-message\" v-if=\"errors.address\">{{ errors.address }}</span>\r\n          </div>\r\n\r\n          <div class=\"form-group\">\r\n            <label class=\"required\">手机号：</label>\r\n            <input\r\n              type=\"tel\"\r\n              class=\"form-control\"\r\n              v-model=\"formData.phone\"\r\n              placeholder=\"请输入11位手机号\"\r\n              :class=\"{ 'invalid': errors.phone }\"\r\n              @blur=\"validatePhone\"\r\n            >\r\n            <span class=\"error-message\" v-if=\"errors.phone\">{{ errors.phone }}</span>\r\n          </div>\r\n\r\n          <div class=\"form-group\">\r\n            <label>身份：</label>\r\n            <select class=\"form-control\" v-model=\"formData.identity\">\r\n              <option value=\"老年人\">老年人</option>\r\n              <option value=\"家属\">家属</option>\r\n              <option value=\"社区管理员\">社区管理员</option>\r\n            </select>\r\n          </div>\r\n\r\n          <div class=\"form-group full-width\">\r\n            <label class=\"required\">登录密码：</label>\r\n            <input\r\n              type=\"password\"\r\n              class=\"form-control\"\r\n              v-model=\"formData.password\"\r\n              placeholder=\"至少8位字符\"\r\n              minlength=\"8\"\r\n              required\r\n              :class=\"{ 'invalid': errors.password }\"\r\n              @blur=\"validatePassword\"\r\n            >\r\n            <span class=\"error-message\" v-if=\"errors.password\">{{ errors.password }}</span>\r\n          </div>\r\n\r\n          <button type=\"submit\" class=\"submit-btn\">创建账户</button>\r\n          \r\n          <div class=\"login-link\">\r\n            已有账号？<a href=\"#\" @click.prevent=\"goBack\">返回登录</a>\r\n          </div>\r\n        </div>\r\n      </form>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script setup>\r\nimport { reactive } from 'vue'\r\nimport { useRouter } from 'vue-router'\r\nimport config from '@/utils/config';\r\n\r\nconst router = useRouter()\r\n\r\n// 表单数据响应式对象\r\nconst formData = reactive({\r\n  name: '',\r\n  gender: '男',\r\n  idCard: '',\r\n  address: '',\r\n  phone: '',\r\n  identity: '老年人',\r\n  password: ''\r\n})\r\n\r\n// 错误信息对象\r\nconst errors = reactive({\r\n  name: '',\r\n  idCard: '',\r\n  address: '',\r\n  phone: '',\r\n  password: ''\r\n})\r\n\r\n// 返回登录页面\r\nconst goBack = () => {\r\n  router.push('/login')\r\n}\r\n\r\n// 验证姓名\r\nconst validateName = () => {\r\n  if (!formData.name.trim()) {\r\n    errors.name = '姓名是必填项'\r\n  } else if (formData.name.trim().length < 2) {\r\n    errors.name = '姓名至少需要2个字符'\r\n  } else {\r\n    errors.name = ''\r\n  }\r\n}\r\n\r\n// 验证身份证（保留原始前端验证）\r\nconst validateIdCard = () => {\r\n  if (!/^\\d{17}[\\dXx]$/.test(formData.idCard)) {\r\n    errors.idCard = '身份证号格式不正确'\r\n  } else {\r\n    errors.idCard = ''\r\n  }\r\n}\r\n\r\n// 验证地址\r\nconst validateAddress = () => {\r\n  if (!formData.address.trim()) {\r\n    errors.address = '家庭地址是必填项'\r\n  } else if (formData.address.trim().length < 5) {\r\n    errors.address = '地址信息太短'\r\n  } else {\r\n    errors.address = ''\r\n  }\r\n}\r\n\r\n// 验证手机号（保留前端格式验证）\r\nconst validatePhone = () => {\r\n  if (!/^1[3-9]\\d{9}$/.test(formData.phone)) {\r\n    errors.phone = '手机号格式不正确'\r\n  } else {\r\n    errors.phone = ''\r\n  }\r\n}\r\n\r\n// 验证密码\r\nconst validatePassword = () => {\r\n  if (formData.password.length < 8) {\r\n    errors.password = '密码至少8位字符'\r\n  } else if (!/[A-Z]/.test(formData.password)) {\r\n    errors.password = '密码需要包含至少一个大写字母'\r\n  } else if (!/[0-9]/.test(formData.password)) {\r\n    errors.password = '密码需要包含至少一个数字'\r\n  } else {\r\n    errors.password = ''\r\n  }\r\n}\r\n\r\n// 表单整体验证\r\nconst validateForm = () => {\r\n  validateName()\r\n  validateIdCard()\r\n  validateAddress()\r\n  validatePhone()\r\n  validatePassword()\r\n  return !Object.values(errors).some(error => error !== '')\r\n}\r\n\r\n// 处理提交\r\nconst handleSubmit = async () => {\r\n  if (!validateForm()) {\r\n    alert('请正确填写所有字段')\r\n    return\r\n  }\r\n\r\n  // 构造符合接口要求的请求体\r\n  const requestBody = {\r\n    name: formData.name.trim(),\r\n    gender: formData.gender === '男' ? 1 : 0, // 转换为接口要求的数字类型\r\n    idCard: formData.idCard.trim(),\r\n    phone: formData.phone.trim(),\r\n    address: formData.address.trim(),\r\n    identity: getIdentityCode(formData.identity), // 转换身份为数字\r\n    password: formData.password.trim()\r\n  }\r\n\r\n  // 真实API请求\r\n  try {\r\n    console.log('提交数据:', requestBody)\r\n    \r\n    // 发送真实API请求\r\n    const response = await fetch(`${config.API_BASE_URL}/register`, {\r\n      method: 'POST',\r\n      headers: {\r\n        'Content-Type': 'application/json'\r\n      },\r\n      body: JSON.stringify(requestBody)\r\n    })\r\n    \r\n    if (!response.ok) {\r\n      throw new Error(`HTTP错误! 状态码: ${response.status}`)\r\n    }\r\n    \r\n    const data = await response.json()\r\n    console.log('注册成功响应:', data)\r\n    \r\n    alert('注册成功！即将跳转到登录页面')\r\n    router.push('/login')\r\n  } catch (error) {\r\n    alert('注册失败，请稍后重试')\r\n    console.error('注册请求失败:', error)\r\n  }\r\n}\r\n\r\n// 身份类型映射\r\nconst getIdentityCode = (identity) => {\r\n  const identityMap = {\r\n    '老年人': 1,\r\n    '家属': 2,\r\n    '社区管理员': 3\r\n  }\r\n  return identityMap[identity] || 1 // 默认返回老年人编码\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n* {\r\n  margin: 0;\r\n  padding: 0;\r\n  box-sizing: border-box;\r\n}\r\n\r\n.registration-container {\r\n  min-height: 100vh;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  padding: 20px;\r\n  font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;\r\n}\r\n\r\n.registration-form {\r\n  width: 100%;\r\n  max-width: 800px;\r\n  background: white;\r\n  padding: 50px;\r\n  border-radius: 20px;\r\n  box-shadow: 0 15px 30px rgba(0, 0, 0, 0.25);\r\n  position: relative;\r\n}\r\n\r\n/* 返回箭头样式 */\r\n.back-arrow {\r\n  position: absolute;\r\n  top: 30px;\r\n  left: 30px;\r\n  width: 44px;\r\n  height: 44px;\r\n  border-radius: 50%;\r\n  background-color: #f0f8ff;\r\n  display: flex;\r\n  align-items: center;\r\n  justify-content: center;\r\n  cursor: pointer;\r\n  transition: all 0.3s ease;\r\n  box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);\r\n  z-index: 10;\r\n}\r\n\r\n.back-arrow:hover {\r\n  background-color: #e1f0ff;\r\n  transform: translateX(-3px);\r\n}\r\n\r\n.back-arrow svg {\r\n  width: 24px;\r\n  height: 24px;\r\n  fill: #2575fc;\r\n}\r\n\r\n.header {\r\n  text-align: center;\r\n  margin-bottom: 40px;\r\n  padding-top: 20px;\r\n}\r\n\r\n.header h2 {\r\n  color: #1a1a1a;\r\n  font-size: 32px;\r\n  position: relative;\r\n  padding-bottom: 15px;\r\n  font-weight: 700;\r\n  margin-bottom: 10px;\r\n}\r\n\r\n.header h2::after {\r\n  content: \"\";\r\n  position: absolute;\r\n  bottom: 0;\r\n  left: 50%;\r\n  transform: translateX(-50%);\r\n  width: 80px;\r\n  height: 4px;\r\n  border-radius: 2px;\r\n}\r\n\r\n.header p {\r\n  color: #666;\r\n  font-size: 16px;\r\n  margin-top: 10px;\r\n}\r\n\r\n.form-container {\r\n  display: grid;\r\n  grid-template-columns: 1fr 1fr;\r\n  gap: 25px;\r\n}\r\n\r\n.form-group {\r\n  display: flex;\r\n  flex-direction: column;\r\n  position: relative;\r\n}\r\n\r\n.form-group.full-width {\r\n  grid-column: 1 / -1;\r\n}\r\n\r\n.form-group label {\r\n  font-size: 14px;\r\n  color: #555;\r\n  margin-bottom: 10px;\r\n  padding-left: 10px;\r\n  position: relative;\r\n  font-weight: 500;\r\n  display: flex;\r\n  align-items: center;\r\n}\r\n\r\n.form-group label::before {\r\n  content: \"\";\r\n  position: absolute;\r\n  left: 0;\r\n  top: 50%;\r\n  transform: translateY(-50%);\r\n  width: 4px;\r\n  height: 14px;\r\n  border-radius: 2px;\r\n}\r\n\r\n.form-control {\r\n  height: 50px;\r\n  padding: 14px 16px;\r\n  border: 1px solid #e4e7ed;\r\n  border-radius: 12px;\r\n  font-size: 15px;\r\n  transition: all 0.3s ease;\r\n  background: #f8f9fa;\r\n  color: #333;\r\n}\r\n\r\n.form-control:focus {\r\n  box-shadow: 0 0 0 3px rgba(37, 117, 252, 0.2);\r\n  background: white;\r\n  outline: none;\r\n}\r\n\r\nselect.form-control {\r\n  appearance: none;\r\n  background-image: url(\"data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='%23666' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'%3e%3cpolyline points='6 9 12 15 18 9'%3e%3c/polyline%3e%3c/svg%3e\");\r\n  background-repeat: no-repeat;\r\n  background-position: right 16px center;\r\n  background-size: 18px;\r\n}\r\n\r\n.error-message {\r\n  color: #ff4757;\r\n  font-size: 13px;\r\n  padding: 8px 10px;\r\n  display: block;\r\n  background: rgba(255, 71, 87, 0.1);\r\n  border-radius: 8px;\r\n  margin-top: 8px;\r\n}\r\n\r\n.invalid {\r\n  border-color: #ff4757 !important;\r\n  background-image: url(\"data:image/svg+xml;charset=UTF-8,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23ff4757'%3e%3cpath d='M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z'/%3e%3c/svg%3e\");\r\n  background-repeat: no-repeat;\r\n  background-position: right 16px center;\r\n  background-size: 18px;\r\n}\r\n\r\n.submit-btn {\r\n  grid-column: 1 / -1;\r\n  width: 100%;\r\n  padding: 16px;\r\n  background: linear-gradient(135deg, #409eff, #66b1ff);\r\n  color: white;\r\n  border: none;\r\n  border-radius: 12px;\r\n  cursor: pointer;\r\n  font-size: 17px;\r\n  margin-top: 20px;\r\n  transition: all 0.3s ease;\r\n  font-weight: 600;\r\n  letter-spacing: 0.5px;\r\n  box-shadow: 0 4px 15px rgba(37, 117, 252, 0.3);\r\n}\r\n\r\n.submit-btn:hover {\r\n  transform: translateY(-3px);\r\n  box-shadow: 0 6px 20px rgba(37, 117, 252, 0.4);\r\n}\r\n\r\n.submit-btn:active {\r\n  transform: translateY(0);\r\n}\r\n\r\n.required::after {\r\n  content: \"*\";\r\n  color: #ff4757;\r\n  margin-left: 4px;\r\n  font-weight: bold;\r\n}\r\n\r\n.login-link {\r\n  grid-column: 1 / -1;\r\n  text-align: center;\r\n  margin-top: 25px;\r\n  color: #666;\r\n  font-size: 15px;\r\n}\r\n\r\n.login-link a {\r\n  color: #2575fc;\r\n  text-decoration: none;\r\n  font-weight: 500;\r\n  margin-left: 5px;\r\n}\r\n\r\n.login-link a:hover {\r\n  text-decoration: underline;\r\n}\r\n\r\n@media (max-width: 840px) {\r\n  .registration-form {\r\n    padding: 70px 30px 40px;\r\n    width: 95%;\r\n  }\r\n  \r\n  .back-arrow {\r\n    top: 20px;\r\n    left: 20px;\r\n    width: 40px;\r\n    height: 40px;\r\n  }\r\n  \r\n  .form-container {\r\n    grid-template-columns: 1fr;\r\n  }\r\n  \r\n  .header h2 {\r\n    font-size: 28px;\r\n  }\r\n}\r\n\r\n@media (max-width: 480px) {\r\n  .registration-form {\r\n    padding: 60px 20px 30px;\r\n  }\r\n  \r\n  .header h2 {\r\n    font-size: 24px;\r\n  }\r\n  \r\n  .form-control {\r\n    height: 46px;\r\n    padding: 12px 14px;\r\n    font-size: 14px;\r\n  }\r\n}\r\n</style>","import script from \"./Register.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./Register.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./Register.vue?vue&type=style&index=0&id=58b71302&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-58b71302\"]])\n\nexport default __exports__","// 全局配置文件\nconst config = {\n  // 后端API基础地址\n  API_BASE_URL: 'http://14.103.237.241:8080'\n};\n\nexport default config;"],"names":["router","useRouter","formData","reactive","name","gender","idCard","address","phone","identity","password","errors","goBack","push","validateName","trim","length","validateIdCard","test","validateAddress","validatePhone","validatePassword","validateForm","Object","values","some","error","handleSubmit","async","alert","requestBody","getIdentityCode","console","log","response","fetch","config","API_BASE_URL","method","headers","body","JSON","stringify","ok","Error","status","data","json","identityMap","__exports__"],"sourceRoot":""}